<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Self Serve Timeshare - Commission-Free Timeshare Selling Platform | No Agent Fees</title>
    <meta name="description" content="Sell your timeshare directly without commission fees or agent costs. Self Serve Timeshare platform connects owners with buyers autonomously. Start your subscription today.">
    <meta name="keywords" content="sell timeshare, commission free timeshare, timeshare selling platform, no agent fees, direct timeshare sales, timeshare marketplace, autonomous timeshare selling">
    <meta name="author" content="Self Serve Timeshare">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://www.selfservetimeshare.com">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.selfservetimeshare.com">
    <meta property="og:title" content="Self Serve Timeshare - Commission-Free Timeshare Selling Platform">
    <meta property="og:description" content="Sell your timeshare directly without commission fees. Connect with buyers autonomously through our subscription-based platform.">
    <meta property="og:image" content="https://www.selfservetimeshare.com/og-image.jpg">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://www.selfservetimeshare.com">
    <meta property="twitter:title" content="Self Serve Timeshare - Commission-Free Timeshare Selling">
    <meta property="twitter:description" content="Sell your timeshare directly without commission fees. No agents, no middlemen, just direct connections.">
    <meta property="twitter:image" content="https://www.selfservetimeshare.com/twitter-image.jpg">
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Self Serve Timeshare",
      "url": "https://www.selfservetimeshare.com",
      "description": "Commission-free timeshare selling platform connecting owners directly with buyers",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://www.selfservetimeshare.com/search?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
    </script>
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "Self Serve Timeshare",
      "url": "https://www.selfservetimeshare.com",
      "logo": "https://www.selfservetimeshare.com/logo.png",
      "description": "Revolutionary commission-free timeshare selling platform",
      "sameAs": [
        "https://www.facebook.com/selfservetimeshare",
        "https://www.twitter.com/selfservetimeshare"
      ]
    }
    </script>
    
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #1f2937;
            background-color: #f8fafc;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%);
            color: white;
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(37, 99, 235, 0.2);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .logo img {
            height: 40px;
            width: auto;
        }

        .nav-buttons {
            display: flex;
            gap: 1rem;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s ease;
            text-align: center;
        }

        .btn-primary {
            background: #f59e0b;
            color: white;
        }

        .btn-primary:hover {
            background: #d97706;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
        }

        .btn-secondary {
            background: transparent;
            color: white;
            border: 2px solid white;
        }

        .btn-secondary:hover {
            background: white;
            color: #2563eb;
        }

        .btn-success {
            background: #10b981;
            color: white;
        }

        .btn-success:hover {
            background: #059669;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.9) 0%, rgba(30, 64, 175, 0.9) 100%), 
                        url('hero-bg.jpg') center/cover;
            color: white;
            padding: 4rem 0;
            text-align: center;
            position: relative;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(37, 99, 235, 0.8) 0%, rgba(30, 64, 175, 0.8) 100%);
            z-index: 1;
        }

        .hero .container {
            position: relative;
            z-index: 2;
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .hero p {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            opacity: 0.95;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .trust-badges {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 2rem;
            flex-wrap: wrap;
        }

        .trust-badge {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(255,255,255,0.15);
            padding: 0.75rem 1.25rem;
            border-radius: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        /* Pricing Section */
        .pricing {
            padding: 4rem 0;
            background: white;
        }

        .pricing h2 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: #1f2937;
        }

        .pricing-subtitle {
            text-align: center;
            font-size: 1.1rem;
            color: #6b7280;
            margin-bottom: 3rem;
        }

        .pricing-cards {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .pricing-card {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(37, 99, 235, 0.1);
            border: 2px solid #e5e7eb;
            transition: all 0.3s ease;
            position: relative;
        }

        .pricing-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(37, 99, 235, 0.15);
            border-color: #2563eb;
        }

        .pricing-card.featured {
            border-color: #10b981;
            transform: scale(1.05);
            box-shadow: 0 15px 35px rgba(16, 185, 129, 0.15);
        }

        .pricing-card.featured::before {
            content: "Most Popular";
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            background: #10b981;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .plan-name {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: #1f2937;
        }

        .plan-price {
            font-size: 2.5rem;
            font-weight: 800;
            color: #2563eb;
            margin-bottom: 0.5rem;
        }

        .plan-period {
            color: #6b7280;
            margin-bottom: 1rem;
        }

        .plan-savings {
            background: #dcfce7;
            color: #166534;
            padding: 0.25rem 0.75rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 1.5rem;
        }

        .plan-features {
            list-style: none;
            margin-bottom: 2rem;
        }

        .plan-features li {
            padding: 0.5rem 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .plan-features li::before {
            content: "✓";
            color: #10b981;
            font-weight: bold;
            font-size: 1.2rem;
        }

        /* SMS Consent Checkbox Styles */
        .sms-consent {
            margin: 1.5rem 0;
            padding: 1rem;
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
        }

        .sms-consent label {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            font-size: 0.9rem;
            line-height: 1.4;
            color: #374151;
            cursor: pointer;
        }

        .sms-consent input[type="checkbox"] {
            margin-top: 0.2rem;
            width: 16px;
            height: 16px;
            flex-shrink: 0;
        }

        .sms-consent-text {
            flex: 1;
        }

        .sms-consent-text a {
            color: #2563eb;
            text-decoration: underline;
        }

        /* Features Section */
        .features {
            padding: 4rem 0;
            background: #f8fafc;
        }

        .features h2 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 3rem;
            color: #1f2937;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }

        .feature-card {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(37, 99, 235, 0.08);
            border: 1px solid #e5e7eb;
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(37, 99, 235, 0.12);
            border-color: #2563eb;
        }

        .feature-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .feature-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #1f2937;
        }

        /* Footer */
        footer {
            background: #1f2937;
            color: white;
            padding: 2rem 0;
            text-align: center;
        }

        /* Responsive */
        @media (max-width: 1024px) and (min-width: 769px) {
            .pricing-cards {
                grid-template-columns: repeat(2, 1fr);
                gap: 1rem;
            }
        }

        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2rem;
            }
            
            .pricing-cards {
                grid-template-columns: 1fr;
            }
            
            .pricing-card.featured {
                transform: none;
            }
            
            .trust-badges {
                flex-direction: column;
                align-items: center;
            }
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: white;
            margin: 2% auto;
            padding: 2rem;
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: black;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .form-group input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 1rem;
        }

        .form-group input:focus {
            outline: none;
            border-color: #4f46e5;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <img src="logo_selfservetimeshare.png" alt="SelfServe Timeshare Logo">
                    SelfServe Timeshare
                </div>
                <div class="nav-buttons">
                    <a href="/dashboard" id="dashboardLink" class="btn btn-secondary" style="display: none;">My Dashboard</a>
                    <a href="/listings" class="btn btn-secondary">Browse Listings</a>
                    <a href="/faq.html" class="btn btn-secondary">FAQ</a>
                    <a href="#" class="btn btn-secondary" id="loginBtn">Login</a>
                    <a href="#pricing" class="btn btn-primary">Get Started</a>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h1>Sell Your Timeshare Commission-Free - No Agent Fees</h1>
            <p>The revolutionary autonomous platform where timeshare owners connect directly with buyers and renters. List your timeshare, control your sale, and keep 100% of proceeds without paying commission fees to agents or brokers.</p>
            <p style="font-size: 1rem; margin-bottom: 1.5rem; opacity: 0.9; color: #fef3c7;"><strong>Important Note for Owners:</strong> Please ensure you understand and comply with your specific resort or timeshare association's rules and processes regarding renting or selling your timeshare. This platform facilitates direct connections, but it is your responsibility to adhere to your resort's policies.</p>
            <a href="#pricing" class="btn btn-primary" style="font-size: 1.1rem; padding: 1rem 2rem;">View Simple Pricing</a>
            
            <div class="trust-badges">
                <div class="trust-badge">
                    <span>🔒</span>
                    <span>Secure Platform</span>
                </div>
                <div class="trust-badge">
                    <span>💰</span>
                    <span>No Commissions</span>
                </div>
                <div class="trust-badge">
                    <span>🤝</span>
                    <span>Direct Owner Contact</span>
                </div>
                <div class="trust-badge">
                    <span>✅</span>
                    <span>You Handle Transactions</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Pricing Section -->
    <section id="pricing" class="pricing">
        <div class="container">
            <h2>Commission-Free Timeshare Selling Plans</h2>
            <p class="pricing-subtitle">Choose your subscription plan and start selling without agent fees. No hidden costs, no commission charges.</p>
            
            <!-- Free Browser Registration -->
            <div style="text-align: center; margin-bottom: 3rem; padding: 2rem; background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); border-radius: 12px; border: 2px solid #0ea5e9;">
                <h3 style="color: #0369a1; margin-bottom: 1rem; font-size: 1.5rem;">🆓 Free Browser Account</h3>
                <p style="color: #0c4a6e; margin-bottom: 1.5rem; font-size: 1.1rem;">Browse all listings, contact property owners, and save favorites - completely FREE!</p>
                <div style="display: flex; justify-content: center; gap: 2rem; margin-bottom: 1.5rem; flex-wrap: wrap;">
                    <div style="color: #0c4a6e;">✅ Browse all property listings</div>
                    <div style="color: #0c4a6e;">✅ Contact property owners</div>
                    <div style="color: #0c4a6e;">✅ Save favorite listings</div>
                </div>
                <p style="color: #64748b; font-size: 0.9rem; margin-bottom: 1.5rem;">To LIST your own properties for sale or rent, choose a paid plan below.</p>
                
                <a href="#" class="btn" style="background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%); color: white; padding: 1rem 2rem; font-size: 1.1rem;" onclick="selectPlan('free_browser', 0)">Sign Up FREE to Browse</a>
            </div>
            
            <div class="pricing-cards">
                <!-- Starter Plan -->
                <div class="pricing-card">
                    <div class="plan-name">Starter Plan</div>
                    <div class="plan-price">$7.99</div>
                    <div class="plan-period">per month</div>
                    
                    <ul class="plan-features">
                        <li>1 Property Listing</li>
                        <li>Sale OR Rental (choose one)</li>
                        <li>6 Photos per Listing</li>
                        <li>Direct Owner Contact</li>
                        <li>Basic Analytics</li>
                        <li>Email Support</li>
                        <li>You Handle Your Own Transactions</li>
                    </ul>
                    
                    <a href="#" class="btn btn-primary" style="width: 100%;" onclick="selectPlan('starter_monthly', 7.99)">Start Starter Plan</a>
                </div>

                <!-- Basic Plan (Featured) -->
                <div class="pricing-card featured">
                    <div class="plan-name">Basic Plan</div>
                    <div class="plan-price">$14.99</div>
                    <div class="plan-period">per month</div>
                    
                    <ul class="plan-features">
                        <li>2 Property Listings</li>
                        <li>Sale AND Rental</li>
                        <li>10 Photos per Listing</li>
                        <li>Direct Owner Contact</li>
                        <li>Advanced Analytics</li>
                        <li>Priority Email Support</li>
                        <li>Featured Listing Option</li>
                        <li>You Handle Your Own Transactions</li>
                    </ul>
                    
                    <a href="#" class="btn btn-primary" style="width: 100%;" onclick="selectPlan('basic_monthly', 14.99)">Start Basic Plan</a>
                </div>

                <!-- Premium Plan -->
                <div class="pricing-card">
                    <div class="plan-name">Premium Plan</div>
                    <div class="plan-price">$24.99</div>
                    <div class="plan-period">per month</div>
                    
                    <ul class="plan-features">
                        <li>5 Property Listings</li>
                        <li>Sale AND Rental</li>
                        <li>20 Photos per Listing</li>
                        <li>Direct Owner Contact</li>
                        <li>Premium Analytics & Insights</li>
                        <li>Phone & Email Support</li>
                        <li>Featured Listings Included</li>
                        <li>Advanced Search Placement</li>
                        <li>You Handle Your Own Transactions</li>
                    </ul>
                    
                    <a href="#" class="btn btn-primary" style="width: 100%;" onclick="selectPlan('premium_monthly', 24.99)">Start Premium Plan</a>
                </div>

                <!-- Unlimited Plan -->
                <div class="pricing-card" style="border-color: #f59e0b; position: relative;">
                    <div style="position: absolute; top: -10px; left: 50%; transform: translateX(-50%); background: #f59e0b; color: white; padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.8rem; font-weight: 600;">Best Value</div>
                    <div class="plan-name" style="color: #f59e0b;">Unlimited Plan</div>
                    <div class="plan-price" style="color: #f59e0b;">$39.99</div>
                    <div class="plan-period">per month</div>
                    
                    <ul class="plan-features">
                        <li>Unlimited Property Listings</li>
                        <li>Sale AND Rental</li>
                        <li>30 Photos per Listing</li>
                        <li>Direct Owner Contact</li>
                        <li>Premium Analytics & Insights</li>
                        <li>Priority Phone & Email Support</li>
                        <li>Featured Listings Included</li>
                        <li>Top Search Placement</li>
                        <li>Bulk Listing Tools</li>
                        <li>API Access</li>
                        <li>You Handle Your Own Transactions</li>
                    </ul>
                    
                    <a href="#" class="btn btn-primary" style="width: 100%; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);" onclick="selectPlan('unlimited_monthly', 39.99)">Start Unlimited Plan</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features">
        <div class="container">
            <h2>Why Choose Self Serve Timeshare Over Traditional Brokers?</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">🏠</div>
                    <div class="feature-title">Pure Listing Platform</div>
                    <p>We provide the platform, you handle the transactions. No middleman involvement in your deals.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">💰</div>
                    <div class="feature-title">Keep 100% of Proceeds</div>
                    <p>No commissions, no transaction fees. Whatever you sell or rent for, you keep it all.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">📊</div>
                    <div class="feature-title">Real Analytics</div>
                    <p>Track views, inquiries, and performance. Know exactly how your listing is performing.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">🤝</div>
                    <div class="feature-title">Direct Owner Control</div>
                    <p>You control pricing, availability, and all communication. Your property, your rules.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('loginModal')">&times;</span>
            <h2>Sign In</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label for="loginUsername">Username:</label>
                    <input type="text" id="loginUsername" name="username" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password:</label>
                    <input type="password" id="loginPassword" name="password" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Sign In</button>
            </form>
        </div>
    </div>

    <!-- Register Modal -->
    <div id="registerModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('registerModal')">&times;</span>
            <h2>Create Account</h2>
            <form id="registerForm">
                <div class="form-group">
                    <label for="registerUsername">Username:</label>
                    <input type="text" id="registerUsername" name="username" required>
                </div>
                <div class="form-group">
                    <label for="registerEmail">Email:</label>
                    <input type="email" id="registerEmail" name="email" required>
                </div>
                <div class="form-group">
                    <label for="registerPassword">Password:</label>
                    <input type="password" id="registerPassword" name="password" required>
                </div>
                <div class="form-group">
                    <label for="registerFirstName">First Name:</label>
                    <input type="text" id="registerFirstName" name="first_name">
                </div>
                <div class="form-group">
                    <label for="registerLastName">Last Name:</label>
                    <input type="text" id="registerLastName" name="last_name">
                </div>
                <div class="form-group">
                    <label for="registerPhone">Phone Number:</label>
                    <input type="tel" id="registerPhone" name="phone" placeholder="(555) 123-4567">
                </div>
                
                <!-- SMS Consent Checkbox (positioned directly after phone number) -->
                <div class="sms-consent" style="margin: 1rem 0; padding: 0.75rem; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px;">
                    <label style="display: flex; align-items: flex-start; gap: 0.5rem; font-size: 0.8rem; line-height: 1.3; color: #374151; cursor: pointer;">
                        <input type="checkbox" id="registerSmsConsent" name="sms_consent" style="margin-top: 0.1rem; width: 14px; height: 14px; flex-shrink: 0;">
                        <span style="flex: 1;">I agree to receive marketing text messages from SelfServe Timeshare about timeshare services and updates. Msg frequency varies. Msg & data rates may apply. Reply STOP to opt out. <a href="/privacy-policy.html" style="color: #2563eb; text-decoration: underline;">Privacy Policy</a></span>
                    </label>
                </div>
                
                <button type="submit" class="btn btn-primary" style="width: 100%;">Create Account</button>
            </form>
        </div>
    </div>

    <script>
        // Modal functions
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'block';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
            }
        }

        // Plan selection
        async function selectPlan(planType, price) {
            // Check if user is already logged in by trying to access dashboard
            try {
                const response = await fetch('/dashboard', {
                    method: 'GET',
                    credentials: 'include'
                });
                
                if (response.ok && !response.url.includes('/login')) {
                    // User is authenticated - redirect directly to payment
                    const confirmMessage = `Upgrade to ${planType.replace('_', ' ').toUpperCase()} plan ($${price}/month)?`;
                    
                    if (confirm(confirmMessage)) {
                        // Redirect directly to Stripe payment
                        window.location.href = `/create-checkout-session?plan=${planType}&price=${price}&upgrade=true`;
                    }
                } else {
                    // User not logged in - store plan and show registration
                    localStorage.setItem('selectedPlan', JSON.stringify({
                        type: planType,
                        price: price
                    }));
                    
                    // Open registration modal
                    openModal('registerModal');
                }
            } catch (error) {
                console.error('Error checking authentication:', error);
                // Fallback to registration if auth check fails
                localStorage.setItem('selectedPlan', JSON.stringify({
                    type: planType,
                    price: price
                }));
                openModal('registerModal');
            }
        }

        // Open login modal
        document.getElementById('loginBtn').addEventListener('click', function(e) {
            e.preventDefault();
            openModal('loginModal');
        });

        // Check if user is logged in and show/hide dashboard link
        document.addEventListener('DOMContentLoaded', function() {
            const userId = localStorage.getItem('userId');
            if (userId) {
                document.getElementById('dashboardLink').style.display = 'inline-block';
                document.getElementById('loginBtn').textContent = 'Logout';
                document.getElementById('loginBtn').onclick = function(e) {
                    e.preventDefault();
                    localStorage.clear();
                    window.location.reload();
                };
            }
        });

        // Login form submission
        document.getElementById('loginForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData);
            
            try {
                const response = await fetch('/auth/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });
                
                const result = await response.json();
                
                if (response.ok) {
                    localStorage.setItem('userId', result.id);
                    localStorage.setItem('user', JSON.stringify(result));
                    closeModal('loginModal');
                    window.location.href = '/dashboard';
                } else {
                    alert('Login failed: ' + result.error);
                }
            } catch (error) {
                alert('Login failed: ' + error.message);
            }
        });

        // Register form submission
        document.getElementById('registerForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData);
            
            try {
                const response = await fetch('/auth/register', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data)
                });
                
                const result = await response.json();
                
                if (response.ok) {
                    // Store user data temporarily
                    localStorage.setItem('tempUser', JSON.stringify(result));
                    closeModal('registerModal');
                    
                    // Check if user selected a plan
                    const selectedPlan = localStorage.getItem('selectedPlan');
                    if (selectedPlan) {
                        const plan = JSON.parse(selectedPlan);
                        
                        // Handle free browser account
                        if (plan.type === 'free_browser') {
                            // Complete free registration
                            localStorage.setItem('user', JSON.stringify(result));
                            localStorage.removeItem('tempUser');
                            localStorage.removeItem('selectedPlan');
                            
                            alert('🎉 Free account created successfully!\n\nYou can now:\n✅ Browse all property listings\n✅ Contact property owners\n✅ Save favorite listings\n\nTo list your own properties, upgrade to a paid plan anytime.');
                            window.location.href = '/listings';
                            return;
                        }
                        
                        // Redirect to Stripe payment for paid plans
                        redirectToStripePayment(result.id, plan);
                    } else {
                        alert('Please select a plan to continue.');
                        window.location.href = '#pricing';
                    }
                } else {
                    alert('Registration failed: ' + result.error);
                }
            } catch (error) {
                alert('Registration failed: ' + error.message);
            }
        });

        // Redirect to Stripe payment
        async function redirectToStripePayment(userId, plan) {
            try {
                // Create Stripe checkout session
                const response = await fetch('/create-checkout-session', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        user_id: userId,
                        plan_type: plan.type,
                        billing_cycle: 'monthly', // Always default to monthly
                        price: plan.price,
                        sms_consent: plan.smsConsent,
                        isUpgrade: plan.isUpgrade || false,
                        currentPlan: plan.currentPlan || 'free'
                    })
                });
                
                const result = await response.json();
                
                if (response.ok && result.checkout_url) {
                    // Redirect to Stripe checkout
                    window.location.href = result.checkout_url;
                } else {
                    alert('Payment setup failed: ' + (result.error || 'Unknown error'));
                    console.error('Payment setup error:', result);
                }
            } catch (error) {
                alert('Payment setup failed: ' + error.message);
                console.error('Payment setup error:', error);
            }
        }

        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth'
                    });
                }
            });
        });
    </script>
    
    <!-- Footer -->
    <footer style="background-color: #374151; color: white; padding: 2rem 0; margin-top: 4rem;">
        <div style="max-width: 1200px; margin: 0 auto; padding: 0 2rem;">
            <div style="text-align: center; border-bottom: 1px solid #4b5563; padding-bottom: 2rem; margin-bottom: 2rem;">
                <div style="display: flex; justify-content: center; gap: 2rem; flex-wrap: wrap;">
                    <a href="/privacy-policy.html" style="color: #d1d5db; text-decoration: none; padding: 0.5rem 1rem; border-radius: 4px; transition: background-color 0.3s ease; hover: background-color: #4b5563;">Privacy Policy</a>
                    <a href="#terms" style="color: #d1d5db; text-decoration: none; padding: 0.5rem 1rem; border-radius: 4px; transition: background-color 0.3s ease;">Terms of Service</a>
                    <a href="#contact" style="color: #d1d5db; text-decoration: none; padding: 0.5rem 1rem; border-radius: 4px; transition: background-color 0.3s ease;">Contact</a>
                    <a href="#support" style="color: #d1d5db; text-decoration: none; padding: 0.5rem 1rem; border-radius: 4px; transition: background-color 0.3s ease;">Support</a>
                </div>
            </div>
            <div style="text-align: center; color: #9ca3af;">
                <div style="margin-bottom: 1rem;">
                    <p style="margin: 0; font-weight: 600;">Contact Information</p>
                    <p style="margin: 0.5rem 0 0 0;">Email: support@selfservetimeshare.com</p>
                    <p style="margin: 0.25rem 0 0 0;">Website: www.selfservetimeshare.com</p>
                </div>
                <p style="margin: 0;">&copy; 2025 SelfServe Timeshare. All rights reserved.</p>
                <p style="margin: 0.5rem 0 0 0; font-size: 0.875rem;">Commission-free timeshare platform connecting owners directly with buyers and renters.</p>
            </div>
        </div>
    </footer>
    
    <!-- Chatbot Script -->
    <script src="chatbot.js"></script>
</body>
</html>

